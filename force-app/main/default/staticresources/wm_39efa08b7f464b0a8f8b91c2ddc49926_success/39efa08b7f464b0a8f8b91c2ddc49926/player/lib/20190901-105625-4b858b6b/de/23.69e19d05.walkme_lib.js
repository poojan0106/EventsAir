window.walkMeGermany = true;window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[23],{826:function(e,n,t){(function(n,a){(function(){n.register("Segment").asCtor(function t(i,e,o,r){this.start=function n(){return new a(function(e){g("Bootstrap Segment integration. Create segmentation object and updating WalkMeAPI"),function n(){r&&(r.Segment=r.Segment||{});i.Segment={identify:d,track:c},r.on("WalkMeReady",function(){g("Detecting if we have been called before WalkMeAPI was ready"),function e(){r.Segment&&r.Segment.preLoadedData&&(g("Fetching values from cache. Identify happened before WalkMeAPI was ready"),r.Segment=s(r.Segment.preLoadedData[0])||{})}()})}(),g("Calling Segment Connector telling we are ready"),function t(){window.walkme_segment_ready&&window.walkme_segment_ready()}(),g("Wait for analytics.identify to happen before continue loading"),function a(e,n){n=n||0;r.Segment&&r.Segment.userId?(g("Segment object is populated in _walkMeInternals. Continue loading",1),e()):o.libSetTimeout(function(){n<20?a(e,++n):(g("Unable to find segmentation variables populated. Segment's analytics.identify not getting called"),e())},200)}(e)})};var g=e.wrapCustomerLog("SegmentIntegration");function d(e){g("Identify from Segment happened!"),r.Segment=s(e)}function c(e){g("Track from Segment happened!")}function s(e){var n={};return e.userId()?(n.userId=String(e.userId()),n.isAnonUser=!1):(n.userId=String(e.anonymousId()),n.isAnonUser=!0),n.email=e.email(),n.traits=e.traits(),n}}).dependencies("ClassWalkMeAPI, Logger, TimerManager, WmInternals"),e.exports={init:function(e){return n.get("Segment").start(e)["catch"](function(e){n.get("Logger").error(e)})}}}).call(window)}).call(this,t(2),t(29))}}]);
