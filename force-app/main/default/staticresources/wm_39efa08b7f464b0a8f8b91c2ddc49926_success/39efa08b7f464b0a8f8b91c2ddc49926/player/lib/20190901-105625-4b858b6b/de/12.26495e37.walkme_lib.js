window.walkMeGermany = true;window._walkmeWebpackJP&&(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[12],{655:function(n,t,a){(function(){var r=_walkmeInternals.ctx,t=r.get("PlatformDI"),e=r.get("Consts");r.register("TutorialsManager").asCtor(a(656).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),r.register("WalkthrusModule").asCtor(a(657)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),r.register("StepRetriever").asCtor(a(658)).dependencies("WalkthrusContainer"),r.register("WalkthruOnBeforeUnloadHandler").asCtor(a(659)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),r.register("WalkthrusContainer").asCtor(a(660)),r.register("CurrentWalkthruData").asCtor(a(661)).dependencies("WalkthrusContainer, Consts"),r.register("CurrentStepUI").asCtor(a(662)).dependencies("CurrentWalkthruData, StepUtils"),r.register("WalkthruStatePersister").asCtor(a(663)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),r.register("WalkthruStateRestorer").asCtor(a(664)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),r.register("WalkthruStepsLoader").asCtor(a(665)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),r.register("WalkthruBranchPlayer").asCtor(a(666)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),r.register("WalkthruApi").asCtor(a(667)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),r.register("WalkthruLegacyExternalApi").asCtor(a(668)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),r.register("WalkthruBranchData").asCtor(a(669)),r.register("WalkthruBalloonButtonsEventsBinder").asCtor(a(670)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),r.register("WalkthruBalloonNotifier").asCtor(a(671)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),r.register("WalkthruPopupNotificationsService").asCtor(a(672)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),r.register("StepUtils").asCtor(a(673)).dependencies("Consts"),r.register("WalkthruSurveyActivator").asCtor(a(674)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),r.register("WalkthruSafeStartHandler").asCtor(a(675)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),r.register("WalkthrusSiteConfigDataMigrator").asCtor(a(676)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),r.register("DataFileWalkthruDataAppender").asCtor(a(677)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),r.register("EndUserWalkthruDataConverter").asCtor(a(678)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),r.register("WalkthrusDestroyer").asCtor(a(679)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),r.register("WalkthruJawsAccessibilityUtil").asCtor(a(680)).dependencies("StepUtils, JawsAccessibilityUtil"),r.register("WalkthruEventDataAppender").asCtor(a(681)).dependencies("CurrentWalkthruData"),r.register("WalkthruEventsInitializer").asCtor(a(682)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),r.register("WalkthruStartFailureHandler").asCtor(a(683)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),r.register("WalkthruActionsFactory").asCtor(a(684)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),r.register("WalkthruRedirectService").asCtor(a(685)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),r.register("TriggersManager").asCtor(a(686)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),r.register("BackButtonUtils").asCtor(a(687)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),r.register("PlayManager").asCtor(a(688)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),r.register("BBCodeWalkthruActivator").asCtor(a(689)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),r.register("BBCodeWalkthruSurveyActivator").asCtor(a(690)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),r.register("WalkthruPopupStepElementFinderExtension").asCtor(a(691)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthruActionStepElementFinderExtension").asCtor(a(692)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthrusModuleInitializer").asCtor(a(693)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, AutoStartTypes, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, AutoStartHelper, WalkthruAutoStartHelper"),r.register("WalkthruOwnershipManager").asCtor(a(694)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),r.register("PassOwnershipNextStepProvider").asCtor(a(695)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),r.register("WalkthruPassOwnershipDeterminator").asCtor(a(696)).dependencies("Consts"),t.register([e.PLATFORM.Web,e.PLATFORM.MobileWeb,e.PLATFORM.Desktop],function(){r.register("WalkthruAutoStartHelper").asCtor(a(697)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),r.register("WalkthruPersistenceDataRetriever").asCtor(a(698)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),r.register("WalkthruRunningState").asCtor(a(699)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),r.register("AnchorTagsFixer").asCtor(a(700)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),r.register("WalkthruConditionEvaluator").asCtor(a(701)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),r.register("WalkthruConditionFunctions").asCtor(a(702)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),r.register("AuditWtsManager").asCtor(a(703)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator"),r.register("AuditStepsManager").asCtor(a(704)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator,AuditingEnabledIndicator"),r.register("WalkthruActionClickedEventBinder").asCtor(a(705)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),r.register("WalkthruStepShowerButtonsCalculator").asCtor(a(706)).dependencies("ArrayUtils, SharedConsts"),r.register("WalkthruStepShower").asCtor(a(707)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),n.exports={init:function(){var t=r.get("IsInEditor"),e=r.get("AuditSourceProvider");r.get("WalkthrusModuleInitializer")[function n(){return t.get()&&!e.isInPreviewMode()?"postDataFileLoaded":"init"}()]()}}}).call(window)},656:function(t,i,o){(function(r){(function(){"use strict";i.__esModule=!0;var a,t=o(95),e=(a=t.DeployablesManager,r(n,a),n.prototype.activateById=function(t,e){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})},n.prototype.autoStartEnabled=function(t){return!this.permalinkManager.isTrainingInStartingMode()},n);function n(t,e,n){var r=a.call(this,{deployables:[],lib:t,type:e.DEPLOYABLE_TYPE.Tutorial})||this;return r.permalinkManager=n,r._name="Walkthru",r}i.TutorialsManager=e}).call(window)}).call(this,o(1))},657:function(t,e,n){(function(Rt){(function(){t.exports=function xt(L,n,O,U,M,b,D,r,B,H,a,F,G,K,V,Y,c,f,h,t,j,Q,X,z,J,q,Z,o,$,E){var tt=this;tt.setTutorials=function ht(t){i={};for(var e=0;e<t.length;e++)t[e].Steps&&n.fixSteps(t[e],O.get());U.setWalkthrus(t)},tt.isTutorialPackageHidden=function Et(t){var e=et.tutorialRunSettingsMap[t.TutorialId];return!!e&&e.isPackageHidden},tt.canShowTutorial=function It(t){if(0==t.IsVisible)return!1;for(var e=d(t,l.URL),n=!1,r=0;r<e.length;r++)if(p(t,e[r])){n=!0;break}if(0<e.length&&!n)return!1;if(1==M.getSettingsValue(t.Settings,"DOCTEnabled",0)){var a=M.getSettingsValue(t.Settings,"DOCT","");if(""!=a)try{var i=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name}).getCurrentEvaluationValueAndStopEvaluating(a);if(B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WtConditionEvaluated,t),!i)return B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(s){}}if(function u(t){return 0<d(t,l.FIRST_STEP_MUST_EXIST).length}(t)){if(0==t.Steps.length)return!1;var o=t.Steps[0];return b.customerLog('First Step Condition for "'+(o.StepTitle||o.StepText)+', Walk-Thru "'+t.Name+'"'),L.findElement(o)}return B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.CanShowWt,t),!0},tt.stopTutorial=function kt(t,e,n){B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WalkthruStopped,V.getCurrentStep()),u(),n||q.releaseBalloons();V.state=D.WALKTHRU_STATE.NOT_RUNNING,h.removeOverlay();var r=V.currentStep;V.currentStep=-1,t||Y.storeStateInCookie();_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset();if(!e){g(V.getCurrentWalkthru(),r,D.SURVEY_START_EVENTS.WalkThruExited)}},tt.startNewTutorial=function _t(d,p,S,g){var T=U.getWalkthruByIndex(d);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(T&&T.TutorialId,function(){return function c(){try{b.customerLog("startNewTutorial : Index = "+d+". From Step = "+p+" testMode: "+S),h.fixFlash(),I(d);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=g,p=H.defaultValue(p,0),S=H.defaultValue(S,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!S){if(V.state!=D.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(d,p))return!0;v(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||y(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WalkthruStarted,T);var e=[],n=p,r=0==(p=_walkmeInternals.ctx.get("PlayManager").findFirstStep(d,p,e));if(0<p&&!S){var a=f.get();a==D.SOURCES.play||a==D.SOURCES.preview?k(d,n,p,D.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,N(d,0,p,D.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==p&&0<(p=_(d))&&!S&&(t=!0,N(d,0,p,D.STEP_STATUS.SkippedByTutorialCondition));if(!A(d,!1)&&p<0){if(S)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(T.TutorialId);var i={tutorialIndex:d,wt:T,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(E,T,i)){for(var o=0;o<e.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(T,T.Steps[e[o].stepIndex],e[o].stepStatus),k(d,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus);var s=e[e.length-1].stepIndex,u=T;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(u,s),v()}}else{if(S)return!0;m(d,p,r,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:undefined,g,n)}}catch(l){return b.error(l),!1}return B.deprecatedRaiseEvent("WtHasGuid",T,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),B.raiseEvent(D.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0}()})},tt.tutorialFinished=w,tt.executeTutorialNextStep=st,tt.postWelcomeStep=gt,tt.executeCurrentStep=ft,tt.executePreviousStep=function At(){V.state=D.WALKTHRU_STATE.RUNNING,q.releaseBalloons(function(){tt.stepWasCompleted(!1),V.currentStep=V.lastBackButtonStepIndex-1,tt.executeTutorialNextStep()})},tt.getAction=it,tt.getSiteConfigByTutorialId=function mt(t){var e;e=et.tutorialRunSettingsMap[t]?et.tutorialRunSettingsMap[t].siteConfig:O.get();return e},tt.isTutorialIdsExist=function Ct(t){var e=r.map(t,U.getWalkthruIndexByWalkthruId),n=r.inArray(-1,e);return n==undefined||-1==n},tt.isStepTrigger=ot,tt.terminateTutorial=function Wt(){V.stepPlayStack=[],q.releaseBalloons(),u(),B.raiseEvent("WalkthruAborted")},tt.checkTutorialSkipFirstStepCondition=_,tt.fillMissingStepAudits=N,tt.getNextStepIncludingSplit=R,tt.releaseEvents=lt,tt.stepWasCompleted=dt,tt.getPlayConditionMode=St,tt.checkPlayStepCondition=function vt(t){var e=M.getSettingsValue(t.Settings,"skipStepCond","");if(0<e.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(a){return!0}{if(1!=M.getSettingsValue(t.Settings,"PSCTEnabled",0))return!z.isActionStep(t)||"never"!=M.getSettingsValue(t.Settings,"whenToFire","");var n=M.getSettingsValue(t.Settings,"PSCT","");if(""==n)return!0;try{var r=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(n);return B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),r}catch(a){return!1}}},tt.executeTutorialStep=ut,tt.checkIfStepExistsWithSkippables=Tt,tt.isStepPlayable=function yt(t,e){return Tt(t,e,undefined,undefined,undefined,D.CHECK_STEP_MODE.Normal)==e},tt.checkTutorialRedirectCondition=A,tt.loadTutorial=m,tt.releaseBalloonsTimeouts=u,tt.resetState=v,tt.cleanCurrentStepResources=function Pt(){if(!s)return;for(var t=s.length-1;0<=t;t--)s[t].cleanResources();s=[]},tt.addCurrentStepResource=function Nt(t){s.push(t)},tt.setMember=nt,tt.removeCrossUsersState=y,tt.getMatchedSurvey=P,tt.getWalkthruSurveyFrequency=T;var et={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},l={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},e="PSCTMode";function nt(t,e){et[t]=e}var C="stepCheck",i={},W=[],rt=!1,at=0,s=[];function it(t){if(i[t.Id]!=undefined)return i[t.Id];var e=M.getSettingsValue(t.Settings,"action",null);return e?(i[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,D.STEP_PLAY_INITIATOR_ENUM.STEP,t),i[t.Id]):(b.customerLog("No action core. aborting..."),null)}function I(t){var e=U.getWalkthruByIndex(t);if(et.tutorialRunSettingsMap[e.TutorialId]){var n=et.tutorialRunSettingsMap[e.TutorialId].siteConfig;n&&O.set(n)}}function ot(t,e){if("number"==typeof t)return t==e;for(var n=t.split(","),r=0;r<n.length;r++)if(e+""==n[r])return!0;return!1}function k(t,e,n,r){for(var a=e;a<n;a++)if(r!=D.STEP_STATUS.SkippedByActionStep){var i=U.getWalkthruByIndex(t);B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.NewSkippedStep,i.Steps[a])}}function d(t,e){var n=Array();if(!t.Conditions)return n;for(var r=0;r<t.Conditions.length;r++)t.Conditions[r].Type==e&&(t.Conditions[r].IsEnabled!=undefined&&1!=t.Conditions[r].IsEnabled||n.push(t.Conditions[r]));return n}function p(t,e){switch(e.Type){case l.URL:return!!o.isLocationMatchString(e.Content);default:b.error(new Error("Invalid condition type: "+e.Type))}}function _(t){for(var e=d(U.getWalkthruByIndex(t),l.SKIP_FIRST_STEP),n=0;n<e.length;n++){var r=e[n];if(o.isLocationMatchString(r.Content)){var a=r.ExtraData,i=a?a-1:1;return b.customerLog("The walk-thru has a skip step condition ("+r.Content+") which is true. Skipping to: "+i),i}}return 0}function A(t,e){var n=d(U.getWalkthruByIndex(t),l.REDIRECT);return 0!=n.length&&function r(t,e){var n=t.Content;return e?a.redirect(n):a.canRedirect(n)}(n[0],e)}function m(t,e,n,r,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),V.stepAppearanceIndex=0;var o=U.getWalkthruByIndex(t);B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WalkthruLoaded,o),I(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),r=H.defaultValue(r,c.generateNewPlayGuid(o.TutorialId)),n=H.defaultValue(n,!0),e=H.defaultValue(e,0);var s=i==undefined?e:i;0===e&&(e=_(t)),S(t,e,r,a,[],[],[]);try{a=a||{type:D.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,s,e,r)}catch(u){b.error(u)}f.get()!=D.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,r),gt(t)}catch(l){b.error(l)}}function S(t,e,n,r,a,i,o){u(),q.releaseBalloons(),V.state=D.WALKTHRU_STATE.RUNNING,V.currentWalkthru=t,V.currentStep=e-1,V.stepPlayHistory=a,V.stepPlayStack=i,V.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=n,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=r,Y.storeStateInCookie()}function u(){F.stopTimeoutsArray("playTimeouts"),et.executeTutorialNextStepNotFinished=!1}function g(t,e,n){if(t&&t.Settings.survey){var r=t.Settings.survey.surveyId,a=T(t.Settings.survey,n);if(a){var i={objectId:t.Id,type:D.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,n,i,r,a,undefined,e)}}}function v(t,e){V.currentWalkthru=-1,V.state=D.WALKTHRU_STATE.NOT_RUNNING,V.currentStep=-1,V.splitPointStack=[],V.stepPlayHistory=[],V.stepPlayStack=[],V.stepCompletedHistory=[],V.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",et.executeTutorialNextStepNotFinished=!1,i={},et.dontContinueTutorial=!1,rt=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||Y.storeStateInCookie()}function y(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var n=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(D.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,n)}}function T(t,e){var n=P(t,e);return n&&(n.repeat||"visit")}function P(t,e){if(t.startCondition==e||t.startCondition==D.SURVEY_START_EVENTS.Both)return t}function N(t,e,n,r){for(var a=e;a<n;a++){var i=U.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],r)}}function w(t){q.releaseBalloons(),V.state=D.WALKTHRU_STATE.NOT_RUNNING,Y.storeStateInCookie();var e=function i(){return 0<V.splitPointStack.length?V.splitPointStack.pop():null}(),n={hadSplit:!!e,finishAfterRefresh:!!t},r=V.getCurrentWalkthru();if(B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WalkthruCompleted,r,n),h.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(r.TutorialId,D.DEPLOYABLE_TYPE.Tutorial),g(r,V.currentStep,D.SURVEY_START_EVENTS.WalkThruCompleted),e){var a=U.getWalkthruByIndex(e.tutorialIndex);B.deprecatedRaiseEvent("switchToWalkthru",a.Id),B.deprecatedRaiseEvent("BackFromBranch",a),S(e.tutorialIndex,e.stepIndex,e.playGuid,e.playInitiator,e.stepPlayHistory,e.stepPlayStack,e.stepCompletedHistory),L.executeTutorialNextStep()}else V.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership()}function st(){b.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(x)}function x(){if(et.executeTutorialNextStepNotFinished)b.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(rt)return rt=!1,b.customerLog("executeTutorialNextStep: waiting for other window",5),b.customerLog("Waiting for other window..."),void function r(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData();F.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow,n=t.getData(e.key,undefined,V.getCurrentWalkthru().userGuid);1==n?(b.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,V.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):r()},500)}();if(et.dontContinueTutorial)b.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);else if(V.getCurrentWalkthru().Steps.length-1!=V.currentStep){et.executeTutorialNextStepNotFinished=!0;var t=function e(){var t=R();return null==t?0:t.Delay}();b.customerLog(H.formatString("Next step including split is: {0} seconds",t),5,D.LOG_FEATURES.BALLOON),F.playSetTimeout(function(){function t(){et.executeTutorialNextStepNotFinished=!1,ft()}V.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(V.getCurrentWalkthru().Id,function(){0<V.currentStep&&!ot(V.getPreviousStep().End,D.WALKTHRU_STEP_TRIGGER.NOTHING)?q.releaseBalloons(t):t()})},1e3*t)}else w()}}function R(){return function s(t,e,n){var r=U.getWalkthruByIndex(t);{if(r.Steps.length>e+1){var a=r.Steps[e+1];return a.TutorialIndex=t,a}var i=V.splitPointStack;if(i.length>n){var o=i[i.length-1-n];return s(o.tutorialIndex,o.stepIndex-1,n+1)}return null}}(V.currentWalkthru,V.currentStep,0)}function ut(a){function t(t){b.customerLog(t,5,D.LOG_FEATURES.BALLOON)}var e=H.getTimer(t),i={};at!=a.Id&&V.stepAppearanceIndex++,a.playNumber=V.stepAppearanceIndex,at=a.Id,B.raiseEvent(D.EVENTS.Walkthrus.StepExecuting,{playNum:V.stepAppearanceIndex});var n=U.getWalkthruByIndex(V.currentWalkthru),r=H.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",a.StepIndex+1,a.StepTitle,n.Name);if(b.customerLog(r),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepStarted,a),Q.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),V.state!=D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&V.state!=D.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&V.state!=D.WALKTHRU_STATE.WAITING_FOR_CONDITION){var o=z.isActionStep(a)?D.STEP_STATUS.Shown:D.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,o)}var s=St(a),u=tt.checkPlayStepCondition(a);if(!u&&(s==D.playConditionModes.PLAY_CONDITION||s==D.playConditionModes.BOTH&&V.state!=D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return b.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.SkippedByCondition),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepSkipped,a),void st();if(pt(a)){var l=Tt(V.currentWalkthru,a.StepIndex,0,1,undefined,D.CHECK_STEP_MODE.Normal);if(-1==l)return b.customerLog("Keep looking for element after popup."),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),V.state=D.WALKTHRU_STATE.WAITING_FOR_ELEMENT,F.playSetTimeout(function(){ft()},500),void Y.storeStateInCookie();if(-2==l||-5==l){var c="Play condition isn't met, skipping the popup.";return-5==l&&(c="Loop detecetd"),b.customerLog(c),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.SkippedNotFound),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepSkipped,a),void st()}}var d=undefined;if(u||V.state!=D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var p={},S=H.getTimer(t);b.customerLog("Step - Play Condition"),d=L.findElement(a,null,p,undefined,undefined,{type:D.ELEMENT_OWNER_TYPE_NAMES.STEP,id:a.Id,stickyType:a.Settings.sticky,owner:{type:D.ELEMENT_OWNER_TYPE_NAMES.WT,id:V.getCurrentWalkthru().Id}}),i.FETime=S("Done looking for sticky step named "+(a.StepTitle||a.StepText)+" with id "+at),a.Score=p.score}else b.customerLog("Sticky PlayCondition isn't met."),d=!1;if(d){if(d&&!0!==d){b.customerLog("Element found:"),b.customerLog(d);var g,T=J.getComplexHtmlElements(a,d);T&&(d=T.elements,g=T.parentElement)}B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepElementFound,a),B.raiseEvent("BeforeNewStepShown");var f=0<V.stepPlayStack.length?V.stepPlayStack[V.stepPlayStack.length-1]:null,h=f?j.getStepById(f).StepIndex:null;if(function y(t){V.stepPlayHistory.push(t),(0<V.stepPlayStack.length?V.stepPlayStack[V.stepPlayStack.length-1]:null)!=t&&V.stepPlayStack.push(t)}(a.Id),M.getSettingsValue(a.Settings,"fake",!1))return b.customerLog("This is a fake step. Continue to next step."),Y.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.FakeFound),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.FakeStep,a),void st();if(V.state=D.WALKTHRU_STATE.RUNNING,z.isActionStep(a))return void F.playSetTimeout(function(){it(a).doAction(),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepPerforming,a)},100);var E={type:D.ELEMENT_OWNER_TYPE_NAMES.step,id:a.Id,owner:{type:D.ELEMENT_OWNER_TYPE_NAMES.WT,id:V.getCurrentWalkthru().Id}},I=_walkmeInternals.ctx.get("TriggersManager").handle(d,a,V.currentStep,V.currentWalkthru,h,E),k=I.executeNextStep,_=I.clearElementEventsFuncs,A=I.buttons;M.getSettingsValue(a.Settings,"waitOtherWindow",!1)&&(rt=!0),i.logicTime=e("Finished pre-balloon logic");var m=a.StepTitle,C=a.StepText;!function P(t){return!(t.DesignTemplateId||t.DesignTemplatePlaceholderConfigs&&0!=t.DesignTemplatePlaceholderConfigs.length)}(a)||(a.DesignTemplatePlaceholderConfigs=$.createPlaceHolderConfigs(Rt.get("SharedConsts").templateEntityType.balloon,a.StepTitle,a.StepText));var W=_walkmeInternals.ctx.create("Balloon",{element:d,parentElement:g,forceEmbedBalloonInIframe:!1,positionHelper:G,dontShowIoBalloon:!Q.isFeatureEnabled("multSpot")&&function N(t){var e=t,n=V.stepPlayHistory;if(1<n.length){var r=U.getWalkthruByIndex(V.currentWalkthru);e=j.getStepById(n[n.length-2],r)}return ot(t.End,D.WALKTHRU_STEP_TRIGGER.NOTHING)||ot(e.End,D.WALKTHRU_STEP_TRIGGER.NOTHING)}(a),isFirstStep:function w(){var t=V.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var n=U.getWalkthruByIndex(V.currentWalkthru),r=j.getStepById(t[e],n);if(!H.isDefined(r.Settings.action))return!1}return!0}(),stepSettings:a.Settings,visibilityFilter:G.getVisibleFilterKey(a),text:{title:m,content:C,subText:function x(){var t=O.get().StepsInfoText,e=ct(),n=e.totalVisibleSteps,r=e.passedVisibleSteps;t=Q.isFeatureEnabled("floatingsubtext")?(t=t.replace("{0}",D.SUBTEXT_CURRENT_START+r+D.SUBTEXT_CURRENT_END)).replace("{1}",D.SUBTEXT_TOTAL_START+n+D.SUBTEXT_TOTAL_END):(t=t.replace("{0}",r)).replace("{1}",n);return t}()},end:a.End,position:a.Position,buttons:{next:A.nextButton,done:A.doneButton,back:0<=A.backButtonStepIndex},data:{balloonEntityId:a.Id,containerEntityId:a.TutorialId,type:a.Type},configuration:a.Configuration,logger:b,drawer:Z.getBalloonDrawer(a.Configuration,a),siteConfig:O.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:a.DesignTemplatePlaceholderConfigs,placeholderVariableValues:ct(),initiatorData:{initiator:a,type:D.STEP_PLAY_INITIATOR_ENUM.STEP}});if(W.onDestroy(function(){lt(d,elementEvents)}),W.setReleaseEvents(_),K.add(W),Y.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.Shown),Q.isFeatureEnabled("jawsAccessibility")){var v=m||C;m&&C&&(v+=". "+C),v&&d.attr("alt",v)}W.Show(!0,function(t,e){wmjQuery.extend(!0,i,t),function r(t,e){var n={balloonDiv:t,step:e};B.raiseEvent(D.EVENTS.Walkthrus.ShowStepBalloon,n)}(e,a);var n={Element:d,Balloon:e};B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepShown,a,n),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepPerforming,a,n),W.SetTimeoutOn(function(){!function t(){switch(V.state){case D.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case D.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case D.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}()||!function n(){!function t(){return H.getSettingsValue(V.getCurrentStep().Settings,"sticky",0)}()?!function e(){return V.getCurrentStep().IsSkippable}()?V.state!=D.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(b.customerLog("Stopping walk-thru."),q.releaseBalloons(),V.state=D.WALKTHRU_STATE.PAUSED,B.raiseEvent("WalkthruAborted"),B.raiseEvent("WalkthruStopped")):(nt("dontContinueTutorial",!1),b.customerLog("Skippable - continue to next step."),st()):(b.customerLog("Sticky - keep looking for element.",5),q.releaseBalloons(),V.state=D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,ft())}()}),k&&(dt(),st())}),M.getSettingsValue(a.Settings,"isSelfExecuting",!1)&&function R(n,r){F.libSetTimeout(function a(){switch(function e(){var t=n.End.split(/,/);return t[0]==D.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<t.length?H.getInt(t[1]):H.getInt(t[0])}()){case D.WALKTHRU_STEP_TRIGGER.CLICK:b.customerLog("Self Executed Step - Trigger: Click",3),X.click(r);break;case D.WALKTHRU_STEP_TRIGGER.HOVER:b.customerLog("Self Executed Step - Trigger: Hover",3),X.hover(r);break;case D.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:b.customerLog("Self Executed Step - Trigger: Text Input",3),X.text(r,n.Settings.selfExecuteText,undefined,undefined,n);break;case D.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var t=n.Settings.complexHtml&&n.Settings.complexHtml.val;t?(X.select(r,t),b.customerLog("Self Executed Step - Trigger: Select Value",3)):b.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:b.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),et.dontContinueTutorial=!1,st()}},1e3*n.Settings.reactionTime||D.DEFAULT_REACTION_TIME)}(a,d)}else b.customerLog("Element not found."),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepElementNotFound,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),V.state==D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(b.customerLog("Step was sticky. Keep looking for the element."),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.WaitingForStickyStep,a),V.state=D.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,F.playSetTimeout(function(){ft()},500),Y.storeStateInCookie()):a.IsSkippable||M.getSettingsValue(a.Settings,"skipNotExists",!1)?(z.isActionStep(a)?(b.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.NonValidActionStep)):(b.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),a,D.STEP_STATUS.SkippedNotFound)),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepSkipped,a),st()):(b.customerLog("Keep looking for the element."),B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.LookingForStepElement,a,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),V.state=D.WALKTHRU_STATE.WAITING_FOR_ELEMENT,F.playSetTimeout(function(){ft()},500),Y.storeStateInCookie())}function lt(t,e){for(var n=0;n<e.length;n++)t.unbind(e[n]+".mt");return!1}function ct(){for(var t,e=U.getWalkthruByIndex(V.currentWalkthru).Steps,n=0,r=0,a=0;a<e.length;a++)(t=e[a]).Type==D.STEP_TYPE.Action||parseInt(M.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(M.getSettingsValue(t.Settings,"fake",0))||(n++,a<=V.currentStep&&r++);return{totalVisibleSteps:n,passedVisibleSteps:r}}function dt(t){t=H.defaultValue(t,!0);var e=V.getCurrentStep();B.deprecatedRaiseEvent(D.EVENTS.Walkthrus.StepCompleted,e),function n(t){V.stepCompletedHistory.push(t.Id)}(e),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),e,D.STEP_STATUS.Performed),function r(t){if(M.getSettingsValue(t.Settings,"resumeOtherWindow",!1)){var e=_walkmeInternals.ctx.get("ClientStorageManager"),n=e.keysConfig.walkthru.waitForOtherWindow;e.saveData(n.key,1,n.expiry,V.getCurrentWalkthru().userGuid)}}(e)):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(V.getCurrentWalkthru(),e,D.STEP_STATUS.MovedBack)}function pt(t){return t.Type==D.STEP_TYPE.Popup&&1==M.getSettingsValue(t.Settings,"popup-play-condition",0)}function St(t){return M.getSettingsValue(t.Settings,e,D.playConditionModes.PLAY_CONDITION)}function gt(t){-1==V.currentStep&&A(t,!0)||st()}function Tt(h,E,I,k,_,A,m){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,e){return function a(t){if(!W||0==W.length)return!1;for(var e=[],n=undefined,r=!1;0<W.length;){if((n=W.pop()).id==t){r=!0;break}e.push(n)}if(0<e.length)for(;0<e.length;)W.push(e.pop());return r}(e),b.customerLog("returned checking "+E+" ("+n.Id+") result: "+t,5,C),t}var e=U.getWalkthruByIndex(h),n=e.Steps[E];k=H.defaultValue(k,1),I=H.defaultValue(I,0);var r=function d(t){for(var e=0;e<W.length;e++){if(W[e].id==t)return!0}return!1}(n.Id);if(b.customerLog("Checking if step index "+E+" ("+n.Id+") can be played. looped: "+r+" on mode:"+A,5,C),function p(t,e){W.push({id:t.Id,mode:e})}(n,A),r)return t(-5,n.Id);var a=!0;St(n)!=D.playConditionModes.STICKY_CONDITION&&(a=tt.checkPlayStepCondition(n));var i=M.getSettingsValue(n.Settings,"fake",!1),o=M.getSettingsValue(n.Settings,"skipNotExists",!1)||n.IsSkippable||!a||i;if(function S(t,e){_&&_.push({stepIndex:t,stepStatus:e})}(E,function g(t,e){return t?e?D.STEP_STATUS.SkippedNotFound:D.STEP_STATUS.SkippedByCondition:D.STEP_STATUS.SupposedToShow}(o,a)),a&&!i&&b.customerLog("Step - Find Element "+(m||"")),a&&!i&&L.findElement(n,undefined,undefined,undefined,undefined,{type:D.ELEMENT_OWNER_TYPE_NAMES.step,id:n.Id,stickyType:n.Settings.sticky,owner:{type:D.ELEMENT_OWNER_TYPE_NAMES.WT,id:e.Id}}))return z.isActionStep(n)?t(function T(t){var e=it(t);if(e.getGoToData){var n=e.getGoToData(),r=Tt(n.tutorialIndex,n.stepIndex,I,k,_,D.CHECK_STEP_MODE.Normal);if(r<0)return r}else if("stopWt"==e.type)return-2;return t.StepIndex}(n),n.Id):z.isPopupStep(n)?t(function f(t){if(!pt(t)||1!=k)return t.StepIndex;if(U.getWalkthruByIndex(h).Steps.length>t.StepIndex){var e=Tt(h,t.StepIndex+1,I,k,_,D.CHECK_STEP_MODE.Normal);return e<0?e:t.StepIndex}}(n),n.Id):t(E,n.Id);var s=E+k;if(o){var u;if(s<0)return t(-2,n.Id);if(s!=e.Steps.length)return b.customerLog("Checking if step "+E+" ("+n.Id+") can be played. Skipping to: "+s,5,C),t(u=Tt(h,s,I,k,_,D.CHECK_STEP_MODE.Normal),n.Id);var l=V.splitPointStack;if(l.length>I){var c=l[l.length-1-I];return u=Tt(c.tutorialIndex,c.stepIndex,I+1,k,_,D.CHECK_STEP_MODE.Normal),b.customerLog("Checking if step "+E+" ("+n.Id+") can be played. reached last step",5,C),t(u,n.Id)}return t(-2,n.Id)}return t(-1,n.Id)})}function ft(){var t=V.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){ut(t)})}!function wt(){_walkmeInternals.ctx.get("WmInternals").on(D.EVENTS.Flows.BeforeFlowStarted,function(){y()})}()}}).call(window)}).call(this,n(2))},658:function(e,t){(function(){e.exports=function t(i){function r(t,e){var n=i.getWalkthruIndexByWalkthruId(t);if(-1<n){var r=a(e,i.getWalkthruByIndex(n));if(r)return r}return null}function a(t,e){if(e)return o(t,e);for(var n=i.getWalkthrus(),r=0;r<n.length;r++){var a=o(t,n[r]);if(a)return a}return null}function o(t,e){for(var n=e.Steps,r=0;r<n.length;r++)if(n[r].Id==t)return n[r];return null}this.getStepByWalkthruAndStepIds=r,this.getStepById=a,this.getStepIndex=function s(t,e){var n=r(e,t);return n?n.StepIndex:-1}}}).call(window)},659:function(t,e){(function(){t.exports=function d(n,r,a,i,o,s,t){this.register=function l(){t.register(e)};var u=!(this.setIgnoreNextBeforeUnload=function c(t){u=t});function e(t){s.isEmpty()&&(n.customerLog("onbeforeunload called",1),u?u=!1:(r.setMember("dontContinueTutorial",!0),a.pauseAllTimeouts(),i.get().enabled()?i.get().loseOwnership(!1,!0):o.isFeatureEnabled("noUnload")&&function e(){a.setWalkmeTimeout(function(){r.setMember("dontContinueTutorial",!1),a.resumeAllTimeouts()},3e3)}()))}}}).call(window)},660:function(t,e){(function(){t.exports=function u(){var t=this;t.getWalkthrus=function e(){return r},t.setWalkthrus=function n(t){r=t},t.getWalkthruByIndex=a,t.getWalkthruById=function i(t){for(var e=0;e<r.length;e++)if(r[e].TutorialId==t)return r[e];return null},t.getWalkthruIndexByWalkthruId=function o(t){for(var e=-1,n=0;n<r.length;n++)if(r[n].TutorialId==t){e=n;break}return e},t.getStepByIndex=function s(t,e){var n=a(t);if(n&&n.Steps[e])return n.Steps[e]};var r=[];function a(t){return r[t]}}}).call(window)},661:function(t,e){(function(){t.exports=function u(t,e){var n=this;function r(){return t.getWalkthruByIndex(n.currentWalkthru)}function a(t){var e=r();return e&&e.Steps&&e.Steps[t]}n.currentWalkthru=-1,n.currentStep=-1,n.stepAppearanceIndex=0,n.splitPointStack=[],n.stepPlayHistory=[],n.stepPlayStack=[],n.stepCompletedHistory=[],n.lastBackButtonStepIndex=-1,n.getCurrentWalkthru=r,n.getCurrentStep=function i(){return a(n.currentStep)},n.getPreviousStep=function o(){return a(n.currentStep-1)},n.getNextStep=function s(){return a(n.currentStep+1)},n.getStep=a,n.state=e.WALKTHRU_STATE.NOT_RUNNING}}).call(window)},662:function(e,t){(function(){e.exports=function t(r,a){this.shouldKeepOverlay=function n(){var t=r.getCurrentStep();return a.isSpotlightStep(t)&&function e(t){return a.isPopupStep(t)&&function n(){var t=r.getPreviousStep(),e=r.getNextStep();return a.isPopupStep(t)||a.isPopupStep(e)}()}(t)}}}).call(window)},663:function(e,t){(function(){e.exports=function t(p,S,a,i,g,T,f){this.storeStateInCookie=function E(){var t=undefined,e=undefined,n=undefined,r=undefined,a=g.getCurrentWalkthru(),i=a?a.TutorialId:-1,o=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),s=S.getCurrentInteractionGuid();g.state==p.WALKTHRU_STATE.RUNNING||g.state==p.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(t=g.currentStep+1,a.Steps.length<=g.currentStep+1&&(e=1)):g.state==p.WALKTHRU_STATE.WAITING_FOR_SPLIT?(t=g.currentStep,n=T.splitTutorialIds,r=T.splitStartFromStepId):t=g.currentStep;var u=function d(t,e,n,r,a,i){var o={};return o[h.CURRENT_TUTORIAL_COOKIE_NAME]=t,o[h.CURRENT_STATE_COOKIE_NAME]=g.state,o[h.CURRENT_STEP_COOKIE_NAME]=e,o[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=g.stepAppearanceIndex,o[h.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,o[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,o[h.SPLIT_POINT_COOKIE_NAME]=g.splitPointStack,o[h.TUTORIAL_FINISHED_COOKIE_NAME]=n,o[h.STEP_PLAY_HISTORY_COOKIE_NAME]=g.stepPlayHistory,o[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=r,o[h.SPLIT_START_FROM_STEP_COOKIE_NAME]=a,o[h.INTERACTION_GUID_COOKIE_NAME]=i,f.raiseEvent("SavingPersistenceData",o),o}(i,t,e,n,r,s),l=_walkmeInternals.ctx.get("ClientStorageManager"),c=l.keysConfig.walkthru.persistenceData;l.saveData(c.key,u,c.expiry,o)},this.getPersistenceData=function u(t){var e=s(t),n=o(e,-1),r={state:i.getInt(e[h.CURRENT_STATE_COOKIE_NAME],p.WALKTHRU_STATE.NOT_RUNNING),step:i.getInt(e[h.CURRENT_STEP_COOKIE_NAME],-1),playNum:e[h.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||g.stepAppearanceIndex,tutotrialGUID:e[h.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:e[h.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:i.defaultValue(e[h.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:i.defaultValue(e[h.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:i.defaultValue(e[h.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:i.defaultValue(e[h.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:a.getWalkthruIndexByWalkthruId(n),splitTutorialIds:i.defaultValue(e[h.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:i.defaultValue(e[h.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:e[h.INTERACTION_GUID_COOKIE_NAME]};return f.raiseEvent("GettingPersistenceData",{persistenceData:e,current:r}),r},this.getRunningWalkthruId=function e(t){return o(s(t))};var h=p.WALKTHRU_PERSISTANCE_DATA_FIELDS;function o(t,e){return i.getInt(t[h.CURRENT_TUTORIAL_COOKIE_NAME],e)}function s(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(p.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}}).call(window)},664:function(t,e){(function(){t.exports=function e(n,s,u,l,c,d,p,S,g,T,f,h,E,I,a){function t(t){p.customerLog("Restoring cross user state",5);var e=a.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var n=0;n<e.length;n++){var r=e[n];if(i(r,t))return r}return!1}function i(i,o){var t=T.getRunningWalkthruId(i);function e(){var t=function a(t){var e=T.getPersistenceData(t),n=s.getStepByIndex(e.tutorial,e.step);n&&(e.isTutorialFinished||e.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&e.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||S.getSettingsValue(n.Settings,"sticky",0)||n.IsSkippable||(p.customerLog("page change happened while waiting for element - pausing walkthru",2),e.state=h.WALKTHRU_STATE.PAUSED));return e}(i);u.stepAppearanceIndex=t.playNum,u.splitPointStack=t.splitPointStack,u.stepPlayHistory=t.stepPlayHistory,u.currentWalkthru=t.tutorial,u.currentStep=t.step,u.stepCompletedHistory=t.stepCompletedHistory,u.state=t.state,g.raiseEvent("RestoringStateFromCookie",t),l.setCurrentInteractionGuid(t.interactionGuid),t.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=t.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=t.playInitiator;var e=s.getStepByIndex(u.currentWalkthru,u.currentStep);function n(){c.playSetTimeout(function(){d.executeCurrentStep()},1e3*e.Delay)}if(u.state==h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||u.state==h.WALKTHRU_STATE.PASSING_OWNERSHIP&&e){u.currentStep--;var r=s.getStepByIndex(u.currentWalkthru,u.currentStep);r&&(r.playNumber=u.stepAppearanceIndex),d.stepWasCompleted(!0),u.currentStep++}if(p.customerLog("isTutorialFinished: "+t.isTutorialFinished,5),1!=t.isTutorialFinished||u.state!=h.WALKTHRU_STATE.RUNNING&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(p.customerLog("Continue from cookie: currentTutorial: "+u.currentWalkthru+" -- currentState: "+u.state+" -- currentStep: "+u.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+i,5),!e||u.state!=h.WALKTHRU_STATE.RUNNING&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_CONDITION&&u.state!=h.WALKTHRU_STATE.PASSING_OWNERSHIP)if(e&&u.state==h.WALKTHRU_STATE.WAITING_FOR_REDIRECT)d.loadTutorial(u.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(e&&u.state==h.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)d.startNewTutorial(u.currentWalkthru,u.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!e||u.state!=h.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&u.state!=h.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(u.state==h.WALKTHRU_STATE.WAITING_FOR_SPLIT)E.splitTutorialIds=t.splitTutorialIds,E.splitStartFromStepId=t.splitStartFromStepId,f.resumeSplit();else{if(u.state!=h.WALKTHRU_STATE.PAUSED)return d.resetState(),p.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+i+")",5),o&&o(!1),!1;p.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),I.releaseBalloons(),d.releaseBalloonsTimeouts(),d.resetState(),g.raiseEvent("WalkthruAborted")}else S.getSettingsValue(e.Settings,"sticky",0)?(p.customerLog("Sticky - keep looking for element",5),u.state=h.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,n()):e.IsSkippable&&(u.getCurrentWalkthru().Steps.length==u.currentStep+1?d.tutorialFinished():(u.currentStep++,u.state=h.WALKTHRU_STATE.RUNNING,n()));else n();else d.tutorialFinished(!0);return o&&o(!0),!0}t?n.afterStepsLoaded(t,e):e()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=i}}).call(window)},665:function(t,e,n){(function(a,f){(function(){t.exports=function r(s,u,l,c,d){var n=this;n.LoadStepsForWT=function e(t){return n.afterStepsLoaded(t,function(){})},n.afterStepsLoaded=function T(n,t){if(p[n])return p[n].then(t,t);var a=d.getWalkthrus(),i=function r(t){for(var e=d.getWalkthrus(),n=0;n<e.length;n++)if(e[n].TutorialId==t)return n;return-1}(n);return a[i]&&0==a[i].Steps.length?(p[n]=new f(function(e,t){o.load(n).then(function(t){0==a[i].Steps.length?(function r(t,e){var n=d.getWalkthrus();n[t].Steps=e,s.fixSteps(n[t],c.get())}(i,t),function o(t,e){for(var n=[],r=0;r<t.length;r++){var a=t[r];if(l.isBranchStep(a)){var i=a.Settings.action.arguments.wtId;n.push(S(i))}n=n.concat(g(a))}u.executeParallel({functionsToExecute:n,successCallback:e})}(t,e)):e()},t)}).then(t,t),!0):t()};var o,p={};function S(e){return function(t){p[e]?t():n.afterStepsLoaded(e,t)}}function g(t){var e=[];if(t.LinkedTutorialIds)for(var n=t.LinkedTutorialIds.split(";"),r=0;r<n.length;r++)n[r]&&e.push(S(n[r]));return e}!function t(){o=a.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}()}}).call(window)}).call(this,n(2),n(29))},666:function(e,t){(function(){e.exports=function t(s,u,l,c,d,p,S,g,T,f,h,E,I){function k(o){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var e,t;o=o||1e3;var n=0;if(1==E.splitTutorialIds.length){if(t=E.splitTutorialIds[0],E.splitStartFromStepId!=undefined){var r=u.getStepIndex(E.splitStartFromStepId,t);-1!=r&&(n=r),s.customerLog(I.formatString("Resuming split, walkthru id: {0}, step index: {1}",t,n))}}else t=function i(t){try{s.customerLog("Multiple branch: Going through all walk-thrus.");var e=function n(t){var e=h.map(t,function(t){var e=function r(t){var e=c.getWalkthruById(t);return e?e.Name:""}(t.TutorialId);s.customerLog("Check walk-thru: "+t.TutorialId+" ("+e+")");var n=d.findElement(t);return n?s.customerLog("First step found."):s.customerLog("First step not found."),{step:t,element:n}});return e=h.filter(e,function(t){return t.element}),h.map(e,function(t){return t.step})}(function r(t){return h.map(t,function(t){return c.getWalkthruById(t).Steps[0]})}(t));if(1==e.length)return e[0].TutorialId;if(!(1<e.length))return null;s.customerLog("can't decide which tutorial to play",5),s.customerLog(e.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(a){s.error(a)}}(E.splitTutorialIds);t?(S.deprecatedRaiseEvent("switchToWalkthru",t),e=c.getWalkthruIndexByWalkthruId(t),p.playSetTimeout(function(){var t={type:g.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:T.getCurrentStep().Id,appType:g.EVENT_SENDER_EVENT_APPS.Step};l.loadTutorial(e,n,!1,undefined,t)},o),f.storeStateInCookie()):(s.customerLog("Try again in 1000ms."),p.playSetTimeout(function(){k()},1e3))}catch(a){s.error(a)}})}this.makeSplit=function o(t,e,n,r,a){T.state=g.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=n&&function i(t){!function e(){return T.getCurrentWalkthru().Steps.length<=T.currentStep+1}()&&T.splitPointStack.push({tutorialIndex:T.currentWalkthru,stepIndex:t!=undefined?t:T.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:T.stepPlayHistory,stepCompletedHistory:T.stepCompletedHistory,stepPlayStack:T.stepPlayStack})}(e);E.splitTutorialIds=t,E.splitStartFromStepId=r,f.storeStateInCookie(),l.stepWasCompleted(),k(a)},this.resumeSplit=k}}).call(window)},667:function(t,e){(function(){t.exports=function n(s,d,u,l,c,p,S,t){var g=this;g.getWalkthrus=function I(t){try{for(var e=s.getWalkthrus(),n=new Array,r=0;r<e.length;r++){var a=e[r].CustomField1;a=a&&(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&");var i={Index:r,Name:e[r].Name,Id:e[r].TutorialId,Visible:e[r].IsVisible,CustomField1:a,Description:e[r].Description,Keywords:e[r].Keywords};t&&(i.ConditionsPassed=_walkMe.canShowTutorial(e[r]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(e[r]),e[r].Keywords==undefined?i.Keywords=[]:i.Keywords=e[r].Keywords),n.push(i)}return n}catch(o){T("walkMeAPI - error running getWalkthrus.",3)}},g.getWalkthrusLabels=function k(t){try{var e=function u(){var t=p.getSettingsValue(d.get().Settings,"labels",null);return t&&1==t.useLabels?S.get():null}();if(null==e)return null;for(var n=this.getWalkthrus(t),r=function l(t,e){for(var n=[],r=0;r<t.length;r++)for(var a=t[r].LinkedTutorials,i=0;i<a.length;i++)n.push(a[i]);var o=[];for(r=0;r<e.length;r++)E(e[r].Id,n)||o.push(e[r]);return o}(e,n),a=d.get(),i=[],o=0;o<e.length;o++){var s={Name:e[o].Name,Id:e[o].Id,Walkthrus:h(n,e[o].LinkedTutorials,e[o].Id)};i.push(s)}return{unlabeledWalkthrus:r,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(c){T("walkMeAPI - error running getWalkthrusLabels.",3)}},g.startWalkthruById=function _(t,e){try{"object"!=typeof t&&(t={id:t,fromStep:e});var n=t.id,r=t.fromStep,a=t.playInitiator;if(n<0||"number"!=typeof n)return!1;var i=f(n);return!(i<0)&&(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API},g.startWalkthruByIndex({index:i,fromStep:r,playInitiator:a}))}catch(o){T("walkMeAPI - error running startWalkthruById.",3)}},g.startWalkthruByIndex=function A(t,e){try{if(!l.isWalkMeVisible())return!1;"object"!=typeof t&&(t={index:t,fromStep:e});var n=t.index,r=t.fromStep,a=t.playInitiator;return!(n<0||"number"!=typeof n)&&(function i(t){c.raiseEvent(u.EVENTS.ApiWasCalled,{initiator:t})}(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API}),_walkMe.startNewTutorial(n,r,!1,a))}catch(o){T("walkMeAPI - error running startWalkthruByIndex.",3)}},g.canStartWalkthru=function a(t,e){try{if(!l.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var n=f(t);return!(n<0)&&_walkMe.startNewTutorial(n,e,!0,u.STEP_PLAY_INITIATOR_ENUM.API)}catch(r){T("walkMeAPI - error running canStartWalkthru.",3)}},g.setWalkthruVisibility=function i(t,e){try{var n=s.getWalkthrus(),r=f(t);return!(r<0)&&(n[r].IsVisible=e,!0)}catch(a){T("walkMeAPI - error running setWalkthruVisibility.",3)}},g.stopWalkthru=function e(){try{_walkMe.stopTutorial()}catch(t){T("walkMeAPI - error running stopWalkthru.",3)}};var T=t.wrapCustomerLog("walkmeAPI");function f(t){for(var e=s.getWalkthrus(),n=0;n<e.length;n++)if(e[n].TutorialId==t)return n;return-1}function h(t,e,n){for(var r=[],a=0;a<t.length;a++)if(E(t[a].Id,e)){var i=mtjQuery.extend(!0,{},t[a]);i.labelId=n,r.push(i)}return r}function E(t,e){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}}}).call(window)},668:function(t,e){(function(){t.exports=function l(i,t,e,n,o){var r=this;r.setTutorials=i.setTutorials,r.isTutorialPackageHidden=i.isTutorialPackageHidden,r.canShowTutorial=i.canShowTutorial,r.stopTutorial=i.stopTutorial,r.startNewTutorial=i.startNewTutorial,r.tutorialFinished=i.tutorialFinished,r.executeTutorialNextStep=i.executeTutorialNextStep,r.postWelcomeStep=i.postWelcomeStep,r.executeCurrentStep=i.executeCurrentStep,r.getCurrentTutorial=t.getCurrentWalkthru,r.getTutorials=e.getWalkthrus,r.setTutorialsForEditor=function s(t,e){try{for(var n=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),r=0;r<n.length;r++)n[r].userGuid=e;i.setTutorials(n)}catch(a){o.error(a)}},r.getState=function a(){return t.state},r.forceSplit=function u(){n.makeSplit.apply(null,arguments)},r.runTutorialsActionConditions={}}}).call(window)},669:function(e,t){(function(){e.exports=function t(){this.splitTutorialIds=[],this.splitStartFromStepId}}).call(window)},670:function(e,t){(function(){e.exports=function t(a,i,o,s,e,u,r,l,c){function d(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){!function r(t){var e={ClickEvent:t};s.raiseEvent("UserStoppedWalkthru",e);var n=-1==a.currentStep;n||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(a.getCurrentWalkthru(),a.getCurrentStep(),i.STEP_STATUS.Exited);o.stopTutorial(n),s.raiseEvent("UserStoppedWalkthruAfterStop",e)}(t)})}function p(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function S(t){for(var e,n=u.getAll(),r=0;r<n.length;r++)n[r].releaseEvents(t)&&(e=!0);return e}function g(t){return!(t.Type!=i.STEP_TYPE.Popup||!t.LinkedTutorialIds||!o.isTutorialIdsExist(t.LinkedTutorialIds.split(";")))&&(e.makeSplit(t.LinkedTutorialIds.split(";")),!0)}this.addButtonEventsToBalloon=function T(t,e){(function n(t){mtjQuery(".walkme-action-next, .walkme-action-start",t).click(function(t){!function e(){s.raiseEvent("NextButtonClicked");var t=a.getCurrentStep();s.deprecatedRaiseEvent(i.EVENTS.Walkthrus.StepTriggered,t),p(t),S()||(a.state=i.WALKTHRU_STATE.RUNNING,r.releaseBalloons(function(){g(t)||(o.stepWasCompleted(),o.executeTutorialNextStep())}))}()}),mtjQuery(".walkme-action-back",t).click(function(t){!function e(){s.raiseEvent("BackButtonClicked"),p(a.getCurrentStep()),a.stepPlayStack.pop(),function t(){if(l.isFeatureEnabled("backButtonAlways"))return!0;return!S(a.lastBackButtonStepIndex-1)}()&&o.executePreviousStep()}()}),mtjQuery(".walkme-action-done",t).click(function(t){!function e(){s.raiseEvent("DoneButtonClicked");var t=a.getCurrentStep();if(s.deprecatedRaiseEvent(i.EVENTS.Walkthrus.StepTriggered,t),p(t),!g(t)){S()||(o.stepWasCompleted(),o.tutorialFinished())}}()})})(t),d(t),c.addButtonEventsToBalloon(t,e)},this.attachBalloonXButtonClickEvent=d}}).call(window)},671:function(e,t){(function(){e.exports=function t(p,S,g,T,f,h,E,I,e,k,_){var A,m;this.showFailPopup=function i(t,e,n,r){r+="<div style='float: right'>",r+=function d(t,e,n,r){(r=p.fixConfiguration(r)).ButtonBorderColor=r.ButtonBorderColor||"#6c84a6";var a="rtl"==t.Direction?"right":"left";p.fixGradientColorsInConfiguration(r,"ButtonBgColor"),p.fixGradientColorsInConfiguration(r,"ButtonBgColor2");var i=r.ButtonBgColor,o=r.ButtonBgColor2,s=r.ButtonShadowWidth,u=r.BalloonButtonRadius,l=i!=o,c="CSS-RESET "+(l?"background:-moz-linear-gradient(top, "+i+", "+o+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+i+"), color-stop(100%,"+o+"));background:-webkit-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-o-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:-ms-linear-gradient(top, "+i+" 0%,"+o+" 100%);background:linear-gradient(to bottom, "+i+" 0%,"+o+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+i+'", endColorstr="'+o+'",GradientType=0 );':"background-color:"+i+";")+"border: 1px solid "+r.ButtonBorderColor+";color:"+r.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+a+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+s+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+u+"px;-webkit-border-radius:"+u+"px;border-radius:"+u+"px;";i!=o&&k.isIE()&&(c+="border-radius: 0px;");l&&CommonUtils.isGradientUsingFilter(c)&&(c+="background: url("+h.get()+"/player/resources/images/spacer.gif) repeat;");return c=c.replace(/CSS-RESET/g,C),"<button class='"+e+"' type='button' style='"+c+"'>"+n+"</button>"}(t,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),function c(t,e,n,r,a,i,o){var s='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+n+" mt-custom-popup-"+n+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+a+'px">'+r+"</div>";s=(s=s.replace(/CSS-RESET/g,C)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+i);var u=I.getTopContainer();u.append(s),(A=mtjQuery("#walkme-popup-body",u)).css({position:"fixed","z-index":S.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),p.setStyleForBalloon(A,e,!1);var l=0;mtjQuery.each(mtjQuery("[width], [style*=width]",A),function(t,e){mtjQuery(e).width()>l&&(l=mtjQuery(e).width())}),A.width()<l&&A.css("width",l+"px");f.centerElementInPage(A,!1),m=T.playSetInterval(function(){f.centerElementInPage(A,!0)},1e3),k.isQuirksMode()||_.shouldHandlePageAsFramesets()||g.displayOverlay(2147483630,!0);A.fadeIn("slow"),E.addButtonEventsToBalloon(A,{objectId:i,type:S.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),o&&o(A)}(0,e,"first-step-not-available",r+="</div>",420,n.Id,a)},this.closePopup=n;var C="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function n(t){m&&m.clear(),e.shouldKeepOverlay()||g.removeOverlay(),g.destroyDivWithIframes(A,t),A=null}function a(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){n()})}}}).call(window)},672:function(e,t){(function(){e.exports=function t(s,u){this.showFailedToStartPopup=function l(t,e,n){if(function o(t){return"v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion}(t))return s.showFailedToStartPopup(t,e,n.Settings.bbcode_v,n.Id);var r=t.BalloonSettings,a={balloonSettings:r,alertText:e,isOldBalloon:!0,bbCodeVersion:n.Settings.bbcode_v,balloonEntityId:n.Id},i=s.createHtmlForNotAvailablePopup(a);u.showFailPopup(t,r,n,i)}}}).call(window)},673:function(e,t){(function(){e.exports=function t(e){this.isActionStep=function n(t){return t.Type&&t.Type==e.STEP_TYPE.Action},this.isBranchStep=function r(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch},this.isPopupStep=function a(t){return t&&t.Type&&t.Type==e.STEP_TYPE.Popup},this.isSpotlightStep=function i(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}}).call(window)},674:function(e,t){(function(){e.exports=function t(l,c,d){this.activateSurvey=function p(t,e,n,r,a,i,o){var s=d.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,u={tutorialId:t.Id,eventSource:e,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:c._currentPlayGUID};l.activateSurvey(r,s,a,n,u)}}}).call(window)},675:function(t,e){(function(){t.exports=function p(n,r,a,i,o,s){var t=this;function u(t,e){var n=e.wt;n.Id!=undefined&&r.safeStartAudit(t,n)}t.auditSafeStartStatus=u,t.redirect=function l(t,e){i.currentStep=0,i.state=n.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=e.tutorialIndex,o.storeStateInCookie(),a.redirect(t)},t.auditStayButtonClicked=function e(t){u(n.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function c(t){var e={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:r._currentPlayGUID,playInitiator:r._currentPlayInitiator,status:n.SAFESTART_ACTION.ErrorShown};s.send(e)},t.auditSafeStartFirstStatus=function d(t,e){u(t,e),function n(t){for(var e=0;e<t.checkStepExistsTrace.length;e++)r.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[e].stepIndex],t.checkStepExistsTrace[e].stepStatus)}(e)}}}).call(window)},676:function(e,t){(function(){e.exports=function t(a,i,o){this.migrateSiteConfigData=function s(t){for(var e=a.getWalkthrus(),n={},r=0;r<e.length;r++)o.fixSteps(e[r],t),n[e[r].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",n)}}}).call(window)},677:function(t,e){(function(){t.exports=function r(a,i,o,t,s,u){var e=this;e.register=function n(){t.registerDataAppender(e)},e.append=function l(t,e){s.isNewLanguage()&&!function n(){a.setWalkthrus([])}();(function r(t){var e=a.getWalkthrus();e=e.concat(t),a.setWalkthrus(e),s.isNewLanguage()&&u.setDeployables(a.getWalkthrus())})(e[o.Tutorial]),i.migrateSiteConfigData(t.SiteConfig)}}}).call(window)},678:function(t,e){(function(){t.exports=function r(g,T,f,h,E,t){var e=this;e.register=function n(){t.registerConverter(e)},e.convert=function I(t,e){for(var n=f.get(0).getAll(),r={},a=0;a<n.length;a++)for(var i=n[a].Steps,o=0;o<i.length;o++){var s=i[o];if(T.isActionStep(s)){var u=h.getSettingsValue(s.Settings,"action",null);if(u&&"setWalkMeData"==u.actionType){var l=u.arguments,c=l.dataKey;if(t[c]){var d=l.dataDuration;if(d>=g.ONE_DAY_SECONDS)if(r[c])d>r[c].Expiry&&(r[c].Expiry=d);else{var p=t[c];if(p!==undefined){var S={Value:p,Expiry:d};r[c]=S}}}}}}for(var c in r)r.hasOwnProperty(c)&&E.saveData(c,r[c].Value,parseInt(r[c].Expiry),e)}}}).call(window)},679:function(t,e){(function(){t.exports=function s(n,r,a,t,e){function i(t,e){e.isDuringLanguageChange?n.stopTutorial(undefined,!0,!0):(e.isDestroyingAll&&(n.setMember("tutorialRunSettingsMap",{}),n.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),r.releaseAllEventBindings(),n.cleanCurrentStepResources())}this.init=function o(){t.on(e.EVENTS.CallReleaseElementsFromBalloons,i)}}}).call(window)},680:function(t,e){(function(){t.exports=function u(r,t){var a,e=this;function n(t,e,n){r.isPopupStep(e)&&(a=document.activeElement,n.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,e){r.isPopupStep(e)&&a&&(a.focus(),a=null)}e.register=function o(){t.register(e)},e.bindEvents=function s(){_walkmeInternals.bind("NewStepShown",n),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}}).call(window)},681:function(e,t){(function(){e.exports=function t(r){this.append=function a(t){var e=r.getCurrentWalkthru();if(e){t.WalkthruId=e.TutorialId;var n=r.getCurrentStep();n&&(t.StepIndex=n.StepIndex)}}}}).call(window)},682:function(t,e){(function(){t.exports=function r(t,n){this.init=function e(){wmjQuery.each(t.get(),function(t,e){e.addAppender(n)})}}}).call(window)},683:function(e,t){(function(){e.exports=function t(i,o,s,u){this.handle=function l(t,e){if(o.isInPlayMode()){var n={step:t.Steps[e],tutorial:t};i.raiseEvent("WalkthruFailedToStart",n)}else{var r=u.getSiteConfigByTutorialId(t.Id),a=s.getSettingsValue(t.Settings,"cantPlayAlert",r.TutorialCantPlayText);_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(r,a,t)}}}}).call(window)},684:function(t,e){(function(){t.exports=function U(a,e,n,o,i,s,r,u,l,c,d,p,S,g,T,f,h,E,I,k,_){this.register=function m(){a.addActions(t)};var t={playWt:function C(r,a,i){function t(){try{var t=r.playWtFromBeginning?0:u.getStepIndex(r.StepId,r.wtId);if(-1==t){var e=k.formatString("Step with id: {0} was not found in walkthru with id {1}",r.StepId,r.wtId);f.customerLog(e)}else WalkMeAPI.startWalkthruById({id:parseInt(r.wtId),fromStep:t,playInitiator:{type:a,objectId:i.Id}})}catch(n){e=k.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",r.wtId,r.StepId,_.toJSON(n));f.customerLog(e)}}this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){I.afterStepsLoaded(r.wtId,t)}},redirect:function W(e){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){p.stepWasCompleted();var t=e.redirectUrl;r.redirect(t)||(p.stepWasCompleted(),p.executeTutorialNextStep())}},refresh:function v(){this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),d.storeStateInCookie(),T.libSetTimeout(function(){location.reload(!0)},200)},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function y(n,t,r){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return function e(t){return!!l.getWalkthruById(t)}(n.wtId)},this.doAction=function(){var t,e=n.wtId;1==n.returnToWt?(t=u.getStepIndex(n.StepId,r.TutorialId),S.makeSplit([e],t,!1,n.startingStepId)):S.makeSplit([e],t,!0,n.startingStepId)},this.getGoToData=function(){return{tutorialIndex:l.getWalkthruIndexByWalkthruId(n.wtId),stepIndex:0}}},stopWt:function P(t){this.type="stopWt",this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),e.stopTutorial()}},playStep:function N(r,t,a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return function n(t,e){return-1!=u.getStepIndex(t,e)}(r.StepId,a.TutorialId)},this.doAction=function(){var t=r.StepId,e=u.getStepIndex(t,a.TutorialId);p.stepWasCompleted(),c.currentStep<e&&p.fillMissingStepAudits(c.currentWalkthru,c.currentStep+1,e,o.STEP_STATUS.SkippedByActionStep),c.currentStep=e,p.executeCurrentStep()},this.getGoToData=function(){var t=r.StepId,e=u.getStepIndex(t,a.TutorialId);return{tutorialIndex:l.getWalkthruIndexByWalkthruId(a.TutorialId),stepIndex:e}}},openPlayerMenu:function w(e,n,r){this.isValid=function(){return window.WalkMePlayerAPI!=undefined},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{p.stepWasCompleted(),a.get("openMenu",e,n,r).doAction()}catch(t){f.error(t,"Failed opening player menu")}p.executeTutorialNextStep()}},waitForCond:function x(a){this.Type=o.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){c.state=o.WALKTHRU_STATE.WAITING_FOR_CONDITION,d.storeStateInCookie();var e=c.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:A,elementName:"Wait for condition step: "+e.StepTitle},n=h.createOld(t),r=a.condition;n.onValueChanged(function(t){g.isDebuggerOnWindow()&&s.deprecatedRaiseEvent(o.EVENTS.ActionConditionEvaluated,e),t&&(p.stepWasCompleted(),p.executeTutorialNextStep())}),n.evaluateAsync(r),p.addCurrentStepResource(n)}},delay:function R(t){this.isValid=function(){return!0},this.doAction=function(){return d.storeStateInCookie(),T.playSetTimeout(function(){p.stepWasCompleted(),p.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function L(t,e,n){this.isValid=function(){return!0},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action;var r={stepId:n.Id,tutorialId:n.TutorialId};this.doAction=function(){var t=i.keysConfig.passOwnership.newWindowTime;if(i.saveData(t.key,(new Date).getTime(),t.expiry),!E.get().enabled())return f.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void p.tutorialFinished();E.get().determineOwnership(r)}},setWalkMeData:function O(e){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(e.dataDuration,o.COOKIE_LIFE_2_YEARS);n.saveData(e.dataKey,e.dataValue,t),p.stepWasCompleted(),p.executeTutorialNextStep()},this.Type=o.DEPLOYABLE_ACTION_TYPES.Action}},A="superstep"}}).call(window)},685:function(t,e){(function(){t.exports=function e(n,r,a){var i;this.redirect=function o(t,e){return!!n.canRedirect(t,e)&&(a.storeStateInCookie(),i=r.libSetTimeout(function(){n.redirect(t)},200),!n.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function s(t,e){return n.canRedirect(t,e)&&!n.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function t(){i&&i.clear()}}}).call(window)},686:function(t,e){(function(){t.exports=function p(A,o,t,m,C,n,W,v,y,P,N,w,s,x,u,a,l,R,L,c,O){var U=this;U.getDelay=function d(t){var e=n.get();return e.Settings.keyPressedNextStepDelay?e.Settings.keyPressedNextStepDelay:r};var r=2e3,i=[];function M(t,r,e,n,a){var i=undefined;a&&(i=function s(t){var e,n=r.Settings.complexHtml;return(e="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex]).value==n.val||e.text==n.txt});var o={change:i};n.push(b(t,r,["change"],e,1e3,o))}function b(t,e,r,a,i,n){w.state=y.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=D(function(t,e){m.customerLog("Step event triggered.");var n=-1!==wmjQuery.inArray("click",r);return H(a,i,n,t,e),!0}),s=0;s<r.length;s++){function u(e){return function(t){e&&!e(t)||o(t)}}var l=u(n&&n[r[s]]);B(t,r[s]+".mt",l)}return function(t){return o(null,t)}}function D(r){var a=!1;return function i(t,e){var n;return a||(n=r(t,e),a=!0),n}}function B(t,e,n){a.bind(t,e,n),i.push({element:t,eventName:e})}function H(t,e,n,r,a){u.releaseBalloons(),n&&(o.shouldHandlePageAsFramesets()&&o.checkIfAnyFrameIsUnloaded(e),null!=r&&c.setIgnoreNextBeforeUnload(function i(t){if(l.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase())e=t;else{var n=t.parents("a");0<n.length&&(e=mtjQuery(n[0]))}if(e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(r.target)))),w.state=y.WALKTHRU_STATE.RUNNING,s.storeStateInCookie(),N.stepWasCompleted(a==undefined),a!=undefined&&(w.currentStep=a),t&&a==undefined?N.tutorialFinished():A.playSetTimeout(function(){N.executeTutorialNextStep()},e)}U.handle=function(t,e,n,r,a,i){var o=w.getStep(n),s=!1,u=!!o.LinkedTutorialIds,l=[];if(u){var c=o.LinkedTutorialIds.split(";");N.isTutorialIdsExist(c)?(m.customerLog("This is a branched step. Branched walk-thru's: "+o.LinkedTutorialIds),l.push(function k(e,n,r,t){w.state=y.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,N.releaseEvents(e,n);for(var a=D(function(t){m.customerLog("Clicked the branched walk-thru."),N.releaseEvents(e,n),x.makeSplit(r)}),i=D(function(){N.releaseEvents(e,n)}),o=0;o<n.length;o++)B(e,n[o]+".mt",a);return function(){return i()}}(t,["click","mousedown"],c))):(m.customerLog("Branch walk-thru id, not found: "+o.LinkedTutorialIds),u=!1)}var d,p=!1,S=!1,g=N.getNextStepIncludingSplit(),T=null==g;if(N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(w.state=y.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,T?S=!0:(g.IsSkippable||L.getSettingsValue(g.Settings,"skipNotExists",!1)||N.getPlayConditionMode(g)!=y.playConditionModes.STICKY_CONDITION&&!N.checkPlayStepCondition(g)||L.getSettingsValue(g.Settings,"fake",!1))&&-2==N.checkIfStepExistsWithSkippables(g.TutorialIndex,g.StepIndex,undefined,undefined,undefined,y.CHECK_STEP_MODE.Normal)?S=!0:p=!0),N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.NOTHING))T||(s=!0);else if(N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.HOVER))d=["mouseenter"],l.push(b(t,e,d,T,500));else if(N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.CLICK)&&!u)d=P.get(),l.push(b(t,e,d,T,1e3));else if(N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var f=U.getDelay(e);d=["keydown","paste","change"];var h={};if(C.isFeatureEnabled("wmAccessibility")){h.keydown=function _(t){return 9!=t.which&&16!=t.which}}l.push(b(t,e,d,T,f,h))}else N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(w.state=y.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,N.setMember("dontContinueTutorial",!0)):N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.DURATION)?o.durationHandler=A.playSetTimeout(function(){N.stepWasCompleted(),N.executeTutorialNextStep()},1e3*o.Duration):N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?M(t,e,T,l,!1):N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?M(t,e,T,l,!0):N.isStepTrigger(o.End,y.WALKTHRU_STEP_TRIGGER.SWIPE)&&(d=["swipe"],l.push(b(t,e,d,T,500)));if(o.Settings.additionalTriggers){v.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepAdditionalTriggerSet,o);var E={elementName:e.StepTitle||e.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},I=R.createOld(E);I.onValueChanged(function(t){if(v.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,o),t){N.setMember("dontContinueTutorial",!1),o.durationHandler&&(o.durationHandler.clear(),o.durationHandler=null);var e=W.containsFuncName(o.Settings.additionalTriggers,["ElementClicked"]);H(T,1e3,e)}}),I.evaluateAsync(o.Settings.additionalTriggers),N.addCurrentStepResource(I)}return{executeNextStep:s,clearElementEventsFuncs:l,buttons:{nextButton:p,doneButton:S,backButtonStepIndex:O.handleStepIndex(o,a,r)}}},U.releaseAllEventBindings=function(){for(var t=0;t<i.length;t++)try{var e=i[t].element,n=i[t].eventName;a.unbind(e,n)}catch(r){}i.length=0},function e(){}.apply(null,arguments)}}).call(window)},687:function(e,t){(function(){e.exports=function t(o,s,u,l){this.handleStepIndex=function c(t,e,n){var r;if(0<t.StepIndex&&o.isStepTrigger(t.End,s.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!function i(t){if(null==t)return!1;var e=u.getStep(t);return l.isActionStep(e)}(e)){if(0<=(r=o.checkIfStepExistsWithSkippables(n,t.StepIndex-1,0,-1,undefined,s.CHECK_STEP_MODE.Normal))){var a=u.getStep(r);o.isStepTrigger(a.End,s.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(r=-1)}u.lastBackButtonStepIndex=r}return r}}}).call(window)},688:function(t,e){(function(){t.exports=function o(t,r,a,e,n){this.findFirstStep=function(t,e,n){return e=e||0,a.checkIfStepExistsWithSkippables(t,e,undefined,undefined,n,r.CHECK_STEP_MODE.Normal)},function i(){}.apply(null,arguments)}}).call(window)},689:function(t,e){(function(){t.exports=function s(r,a,i,t,e){function n(t,e){var n=r.mapBbcodeInitiator(e);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:n})})}this.register=function o(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru,activator:n})}}}).call(window)},690:function(t,e){(function(){t.exports=function r(o,t,s,u,l){function e(t,e){if(function i(t){return-1==t&&o.getCurrentWalkthru()}(t)){s.stop();var n=l.SURVEY_START_EVENTS.BbCodeClicked,r=o.getCurrentWalkthru(),a=r.Settings.survey&&r.Settings.survey.surveyId;_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(r,n,u.mapBbcodeInitiator(e),a,"always")}}this.register=function n(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:l.EVENTS.BBCodeStartActionClicked.Survey,activator:e})}}}).call(window)},691:function(t,e){(function(){t.exports=function a(e,t){this.isEnabled=function n(t){return e.isPopupStep(t)},this.findElement=function r(){return t.get()}}}).call(window)},692:function(e,t){(function(){e.exports=function t(e){this.isEnabled=function n(t){return e.isActionStep(t)},this.findElement=function r(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}}).call(window)},693:function(t,e,n){(function(U){(function(){t.exports=function O(t,e,n,r,a,i,o,s,u,l,c,d,p,S,g,T,f,h,E,I,k,_,A,m,C,W,v,y){var P,N;function w(){x(N)}function x(t){wmjQuery.each(t,function(t,e){e.register()})}this.init=function R(){x(P),W.one(m.EVENTS.DATA_FILES_LOADED,w)},this.postDataFileLoaded=w,function L(){P=[n],(N=[r,e,i,u,S,g,k,_,U.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(m.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),N.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),N.push({register:function(){s.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),N.push({register:function(){l.init()}}),N.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),N.push({register:function(){c.addDeployable(d.Tutorial,p,d.BusinessSolution)}}),N.push({register:function(){I.register(h),I.register(E)}}),N.push({register:function(){f.addRestorer(T,!0)}}),N.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),N.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),N.push({register:function(){A.addOwnershipManager(m.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,C,!0)}}),N.push({register:function(){v.addAutoStartHelper(y,d.Tutorial)}})}()}}).call(window)}).call(this,n(2))},694:function(t,e){(function(){t.exports=function W(a,s,u,l,i,c,d,p,S,o,t,e,n,g,T,f){var h,r=this;function E(t){var e=function a(){return T.getCurrent()==s.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru}(),n=e?T.getCurrentStepData():function i(){var t=f.getData(s.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,undefined,S.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:p.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),r=l.evaluateOwnership(n.step,n.walkthruId,e);return e||t||function o(t){switch(t){case s.PASS_OWNERSHIP.EvaluateOwnership.Owner:!function e(){u.stepWasCompleted(),u.executeTutorialNextStep()}();break;case s.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:!function n(){c.state!=s.WALKTHRU_STATE.PASSING_OWNERSHIP&&c.currentStep++;c.state=s.WALKTHRU_STATE.PASSING_OWNERSHIP,d.storeStateInCookie()}()}}(r),r}r.walkthruStarted=function I(t,e){return T.wrap(s.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,function r(t,e){var n=i.getWalkthruByIndex(t);return{walkthruId:n.Id,step:n.Steps[e]}}(t,e),function(){return function r(t,e){var n=a.get().optimizedDetermineOwnership();n||(c.state=s.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,c.currentWalkthru=t,c.currentStep=e,d.storeStateInCookie(),u.terminateTutorial(),c.state=s.WALKTHRU_STATE.NOT_RUNNING,a.get().reset());return n}(t,e)})},r.evaluateOwnership=function k(t,e){if(e)return T.wrap(s.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e,function(){return E(t)});return E(t)},r.evaluateOwnershipByPeeking=function _(){return(n.isFeatureEnabled("po_peek")||n.isFeatureEnabled("passOwnership"))&&l.isPassOwnershipStep(e.peekNextCookieStep())},r.gainedOwnership=function A(t,e,n){h("walkthru is gaining ownership with state "+c.state,3),n&&function r(t,e){t?function n(){_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),g.resumeTimeoutsArray("playTimeouts")}():(h("ownership granted to: "+e,3),o.restoreStateFromCookie(S.getUserGuid()))}(t,e)},r.lostOwnership=function m(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},function C(){h=t.wrapCustomerLog(s.PASS_OWNERSHIP.LOG_FEATURE)}()}}).call(window)},695:function(e,t){(function(){e.exports=function t(o,s,u,l){this.peekNextCookieStep=function c(t){try{t=t||0;var e=o.getData(s.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},l.getAllUserGuids()[0]),n=e[s.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],r=u.getWalkthruById(n),a=e[s.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME];return r.Steps[a+t]}catch(i){return null}}}}).call(window)},696:function(e,t){(function(){e.exports=function t(a){function i(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==a.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=i,this.evaluateOwnership=function o(t,e,n){return n&&!i(t)?a.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function r(t,e){{if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),!1;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(n){return!0}}}(t,e)?a.PASS_OWNERSHIP.EvaluateOwnership.Owner:a.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}}).call(window)},697:function(t,e){(function(){t.exports=function e(r,c,d,p,S){var g,T;this.clearCache=function t(){g=undefined,T=undefined},this.checkShouldAutoStart=function a(t,e,n){return t!=r.Tutorial||function l(t,e){var n=c.getWalkthruIndexByWalkthruId(t.Id),r=d.checkTutorialSkipFirstStepCondition(n),a=d.checkTutorialRedirectCondition(n,!1),i=t.IsWelcomeStep,o=function s(){g=g||p.get();return g}();return!(o.state==S.WALKTHRU_STATE.RUNNING&&o.step==r)&&function u(t,e){return T==undefined?T=t.state==S.WALKTHRU_STATE.PAUSED||t.state==S.WALKTHRU_STATE.NOT_RUNNING||!e&&d.checkIfStepExistsWithSkippables(t.tutorial,t.step,undefined,undefined,undefined,S.CHECK_STEP_MODE.Sandbox,"- Engagement")<0:T}(o,e)&&(a&&i||d.checkIfStepExistsWithSkippables(n,r,undefined,undefined,undefined,S.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=r&&!a)}(e,n)}}}).call(window)},698:function(e,t){(function(){e.exports=function t(e,n,r){this.get=function a(){var t=e.getPersistenceData();r.state==n.WALKTHRU_STATE.PAUSED&&(t.state=r.state);return t}}}).call(window)},699:function(e,t){(function(){e.exports=function t(e,n,r){this.isRunning=function a(){var t=e.get();return!(t.state==r.WALKTHRU_STATE.PAUSED||t.state==r.WALKTHRU_STATE.NOT_RUNNING||n.checkIfStepExistsWithSkippables(t.tutorial,t.step,undefined,undefined,undefined,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0)?wmjQuery.when():wmjQuery.Deferred().reject()}}}).call(window)},700:function(e,t){(function(){e.exports=function t(n,r){this.fixAnchorTagsOnBeforeUnload=function a(){if(n.isIE()){var t=mtjQuery("a[href^='javascript:']"),e="click.walkme.ignoreUnload";t.off(e),t.on(e,function(){r.setIgnoreNextBeforeUnload(!0)})}}}}).call(window)},701:function(t,e){(function(){t.exports=function r(a,i,t){function e(t){t=parseInt(t);for(var e=a.stepPlayHistory,n=0;n<e.length;n++){var r=i.getStepById(e[n]);if(r&&r.StepIndex==t)return!0}return!1}this.register=function n(){t.addSupportedFunction("isStepPlayed",e)}}}).call(window)},702:function(t,e){(function(){t.exports=function _(s,n,u,l,o,i,c){this.register=function I(){wmjQuery.each(t,function(t,e){n.register(t,e.handler,e.params)})};var t={};function r(t,e){for(var n=parseInt(e.funcArgs.StepId),r=i.stepPlayHistory,a=0;a<r.length;a++)if(r[a]==n)return void t.setValue(!0);t.setValue(!1)}function e(t,e){E(r,t,e)}function a(t,e){for(var n=parseInt(e.funcArgs.StepId,10),r=0;r<i.stepCompletedHistory.length;r++)if(i.stepCompletedHistory[r]==n)return void t.setValue(!0);t.setValue(!1)}function d(t,e){E(a,t,e)}function p(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(r),i=l.getStepIndex(n,r);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!1))}else t.setValue(!1)}function S(t,e){E(p,t,e)}function g(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruIndexByWalkthruId(r),i=l.getStepIndex(n,r);if(-1<i&&-1<a&&0<=o.checkIfStepExistsWithSkippables(a,i,undefined,undefined,undefined,c.CHECK_STEP_MODE.Sandbox))return void t.setValue(!0);t.setValue(!1)}function T(t,e){E(g,t,e)}function f(t,e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),a=u.getWalkthruById(r),i=l.getStepIndex(n,r);if(a&&-1<i){var o=a.Steps[i];t.setValue(!1!==s.findElement(o,!0))}else t.setValue(!1)}function h(t,e){E(f,t,e)}function E(t,e,n){t(e,n),e.setValue(!e.getValue())}!function k(){t.StepPlayed={handler:r},t.StepNotPlayed={handler:e},t.StepCompleted={handler:a},t.StepNotCompleted={handler:d},t.StepExists={handler:p,params:{editorPreview:!0}},t.StepNotExists={handler:S,params:{editorPreview:!0}},t.StepCanPlay={handler:g},t.StepCannotPlay={handler:T},t.StepIsVisible={handler:f,params:{editorPreview:!0}},t.StepIsNotVisible={handler:h,params:{editorPreview:!0}}}()}}).call(window)},703:function(t,e){(function(){t.exports=function e(o,s,u,l){this.auditWalkthruStart=function c(t,e,n,r,a){if(!l.isEnabled())return;var i=t.Steps;s.postEvent(s.EVENT_TYPES.Play,{type:s.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:u.map(e),oRequestedSubObject:i[n].Id,oActualSubObject:i[r].Id})},function t(){}.apply(null,arguments)}}).call(window)},704:function(t,e){(function(){t.exports=function r(o,u,l,c,a,d,p,S,g,e,T){var f,h=this;h.safeStartAudit=function i(t,e){if(!T.isEnabled())return f("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:h._currentPlayGUID,playInitiator:h._currentPlayInitiator,status:t};a.send(n)}catch(r){o.error(r)}},h.auditStep=function E(t,e,n){!function a(t,e){if(t!=u.STEP_STATUS.SkippedByActionStep){var n=t==u.STEP_STATUS.SkippedStartedFromBiggerStep?u.EVENTS.Walkthrus.NewSkippedStep:u.EVENTS.Walkthrus.CheckNewStep;g.deprecatedRaiseEvent(n,e)}}(n,e);var r=t.Steps.length;if(!T.isEnabled())return f("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(e.TutorialId<0)return void f(l.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);try{try{return function s(t,e,n,r){var a=p.getSettingsValue(t.Settings,"action","");return c.postEvent(c.EVENT_TYPES.Play,{type:c.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:function i(t){return t?d.map(t.actionType):""}(a),aAppType:function o(t){return t?S.map(t.actionType):""}(a),oType:t.Type,indx:t.StepIndex+1,owId:e.TutorialId,owName:e.Name,owType:c.EVENT_APPS.Walkthru,total:n,status:r,pId:h._currentPlayGUID})}(e,t,r,n)}catch(i){return o.error(i,"Failed auditStep: stepId="+e.Id+", wtId="+t.TutorialId+", status="+n+", pId="+h._currentPlayGUID),!0}}catch(i){return o.error(i),i}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=function n(t){h._currentPlayGUID!=undefined&&0!=h._currentPlayGUID.length||(h._currentPlayGUID=e.generateNewPlayGuid(t))},function t(){f=o.wrapCustomerLog(u.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}}).call(window)},705:function(t,e){(function(){t.exports=function i(t,e,n,r){this.register=function a(){t.add(n.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return r._currentPlayGUID})}}}).call(window)},706:function(e,t){(function(){e.exports=function t(o,s){this.calculate=function l(t,e){var n=undefined;n=t.Type===s.stepType.Simple?function r(t){return function e(t){return-1<wmjQuery.inArray(s.stepTrigger.Button.toString(),t.split(","))}(t.End)?{next:!0}:{}}(t):function a(t){var e=t.Settings&&t.Settings.popupStepButtons||[],n={};return o.foreach(e,function(t){var e=u[t.action];n[e]=!0}),n}(t);e&&wmjQuery.extend(n,function i(t){var e={};0<t.passedVisibleSteps&&(e.back=!0);t.passedVisibleSteps<t.totalVisibleSteps&&(e.next=!0);t.passedVisibleSteps!==undefined&&t.passedVisibleSteps===t.totalVisibleSteps&&(e.done=!0);return e}(e));return n};var u={};!function e(){var t=s.POPUP_BUTTON_ACTIONS;u[t.NextDone]="next",u[t.Start]="start",u[t.Back]="back",u[t.Cancel]="cancel"}()}}).call(window)},707:function(e,t,n){(function(m){(function(){e.exports=function t(c,d,p,S,g,T,f,h,E,I,k,_){this.showStep=function A(t,e,n){var r=p.secureEvalJSON(t);S.fixStep(r,0,h.get());var a=d.findElement(r);if(c.customerLog("element:",5),c.customerLog(a,5),!a)return!1;var i,o=g.getComplexHtmlElements(r,a);o&&(a=o.elements,i=o.parentElement);!function u(t){return!(t.DesignTemplateId||t.DesignTemplatePlaceholderConfigs&&0!==t.DesignTemplatePlaceholderConfigs.length)}(r)||(r.DesignTemplatePlaceholderConfigs=k.createPlaceHolderConfigs(_.templateEntityType.balloon,r.StepTitle,r.StepText));var s=m.create("Balloon",{element:a,parentElement:i,forceEmbedBalloonInIframe:e,positionHelper:T,stepSettings:r.Settings,visibilityFilter:T.getVisibleFilterKey(r),text:{title:r.StepTitle,content:r.StepText,subText:function l(t){if(!t||!t.hasOwnProperty("passedVisibleSteps"))return"";var e=h.get().StepsInfoText;return e?e=(e=e.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(n)},position:r.Position,data:{stepId:r.Id,type:r.Type},buttons:I.calculate(r,n),configuration:r.Configuration,logger:c,drawer:f.getBalloonDrawer(r.Configuration,r),isViewStep:!0,siteConfig:h.get(),bindButtonsFunc:m.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:r.DesignTemplatePlaceholderConfigs});return E.add(s),s.Show(!0,function(){s.SetTimeoutOn()}),s}}}).call(window)}).call(this,n(2))}}]);
